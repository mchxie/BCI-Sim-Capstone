{% extends "base.html" %}

{% block title %}BCI Simulator{% endblock %}

{% block content %}
<div id="app-container">
    <!-- Landing Page -->
    <section id="landing-screen" class="screen active">
        <div class="mb-40"></div>
        <div class="min-h-screen flex items-center justify-center px-4 py-20">
            <div class="max-w-7xl w-full">
                <!-- Hero Section -->
                <div class="text-center mb-20 fade-in">
                    <h1 class="text-7xl font-bold mb-6 gradient-text leading-tight">
                        Brain-Computer Interface Simulator
                    </h1>
                    <p class="text-2xl text-gray-400 mb-8 font-light">
                        Explore how different brain-signal recording methods work
                    </p>
                    <button id="start-btn" class="btn-glow bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold text-xl px-16 py-5 rounded-full transition-all duration-300 transform hover:scale-105 shadow-2xl relative z-10">
                        Start Building Your BCI
                        <svg class="inline-block ml-2 w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                    </button>
                </div>

                <!-- Problem Section -->
                <div class="grid md:grid-cols-2 gap-12 mb-20">
                    <div class="glass-card rounded-3xl p-10 stagger-item">
                        <div class="icon-circle mb-6">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                        </div>
                        <h2 class="text-3xl font-semibold text-white mb-4">The Challenge</h2>
                        <p class="text-gray-400 font-light text-lg leading-relaxed">
                            Millions of people with paralysis, neurological disorders, or limb loss struggle with limited communication and mobility. 
                            Although their mind remains intact, they are <span class="font-castoro italic text-gray-300">locked within a body that can no longer execute its commands.</span>
                            Traditional assistive technologiesoften require physical movement, 
                            leaving those with severe disabilities without viable solutions.
                        </p>
                    </div>

                    <div class="glass-card rounded-3xl p-10 stagger-item">
                        <div class="icon-circle mb-6">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h2 class="text-3xl font-semibold text-white mb-4">The Solution</h2>
                        <p class="text-gray-400 font-light text-lg leading-relaxed">
                            Brain-Computer Interfaces (BCIs) enable <span class="font-castoro italic text-gray-300">direct communication between the brain and external devices</span>, 
                            bypassing traditional neural pathways. From controlling prosthetic limbs to typing with thoughts alone, 
                            BCIs are transforming lives and expanding human potential by reconnecting the individual to the world, restoring their once-lost autonomy.
                        </p>
                    </div>
                </div>

                <!-- Why This Simulator -->
                <div class="glass-card rounded-3xl p-12 mb-20 stagger-item">
                    <h2 class="text-4xl font-semibold text-white mb-6 text-center">Why This Simulator?</h2>
                    <p class="text-gray-400 font-light text-xl leading-relaxed text-center max-w-4xl mx-auto mb-8">
                        Understanding BCIs requires balancing complex tradeoffs between <span class="font-castoro italic text-gray-300">accuracy, safety, speed, and cost</span>. 
                        However, the high stakes of neurosurgery and the cost of equipment make "tinkering" impossible for most. 
                        <br></br>This interactive tool aims to provide an accessible way to explore the design aspect of BCIs. 
                        By simulating everything from non-invasive EEG to high-fidelity implants, 
                        you can experience the decisions researchers face every day without the real-world constraints of a clinical lab.
                    </p>
                    
                    <div class="grid md:grid-cols-3 gap-8 mt-12">
                        <div class="text-center">
                            <div class="w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl">
                                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold text-white mb-2">Interactive Learning</h3>
                            <p class="text-gray-400 font-light">Adjust parameters in real-time and see immediate performance changes</p>
                        </div>

                        <div class="text-center">
                            <div class="w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl">
                                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold text-white mb-2">Evidence-Based</h3>
                            <p class="text-gray-400 font-light">Built on scientific research and realistic performance models</p>
                        </div>

                        <div class="text-center">
                            <div class="w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl">
                                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold text-white mb-2">Decision Support</h3>
                            <p class="text-gray-400 font-light">Compare methods and understand tradeoffs for different applications</p>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="text-center stagger-item">
                    <p class="text-gray-600 font-light text-sm uppercase tracking-wider mb-4">Educational Project Only</p>
                    <p class="text-gray-500 font-light">Michelle Xie's Capstone Project • CLC 12</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Modality Selection -->
    <section id="modality-screen" class="screen hidden min-h-screen">
        <header class="glass-card sticky top-0 z-40 shadow-2xl border-b border-white/10">
            <div class="container mx-auto px-4 py-4 flex items-center justify-between">
                <button id="app-title" class="text-2xl font-semibold text-white hover:text-gray-300 transition-colors">
                    BCI Simulator
                </button>
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-white font-semibold shadow-lg">1</div>
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-white font-semibold shadow-lg">2</div>
                    <div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-gray-400 font-semibold">3</div>
                    <div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-gray-400 font-semibold">4</div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/account" class="text-white hover:text-gray-300 transition-colors font-light flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        {{ username }}
                    </a>
                    <button id="help-btn" class="w-10 h-10 rounded-full bg-indigo-600 hover:bg-indigo-500 text-white font-semibold transition-all hover:scale-110">?</button>
                    <button id="reset-btn" class="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 text-white transition-all hover:scale-110">
                        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                    </button>
                    <a href="/logout" class="text-white hover:text-gray-300 transition-colors font-light">Logout</a>
                </div>
            </div>
        </header>

        <main class="container mx-auto px-4 py-16 fade-in">
            <h2 class="text-5xl font-semibold gradient-text text-center mb-4">Choose Your Recording Method</h2>
            <p class="text-xl text-gray-400 text-center mb-16 max-w-3xl mx-auto font-light">
                Each method has different strengths and trade-offs. Select one to configure your BCI.
            </p>

            <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <!-- EEG Card -->
                <div class="modality-card glass-card-strong rounded-3xl shadow-2xl overflow-hidden cursor-pointer border border-white/10" data-modality="eeg">
                    <div class="h-40 bg-gradient-to-br from-indigo-600/20 to-purple-600/20 flex items-center justify-center border-b border-white/10">
                        <div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl">
                            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="p-8">
                        <h3 class="text-4xl font-semibold text-white mb-2">EEG</h3>
                        <p class="text-sm text-gray-400 font-castoro italic mb-3">Electroencephalography</p>
                        <span class="inline-block bg-indigo-500/20 text-indigo-300 text-xs font-semibold px-4 py-2 rounded-full mb-6 border border-indigo-500/30">THE SAFE STANDARD</span>
                        <ul class="space-y-3 text-gray-300 font-light mb-8">
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Non-invasive (scalp electrodes)</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Accuracy: 70-85%</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Latency: 50-100ms</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Cost: $200-$2,000</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Best for: Research, gaming</li>
                        </ul>
                        <div class="flex items-center justify-between">
                            <button class="info-btn text-indigo-400 hover:text-indigo-300 font-semibold transition-colors flex items-center" data-modality="eeg">
                                <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Learn More
                            </button>
                            <button class="select-btn bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold px-8 py-3 rounded-xl transition-all transform hover:scale-105">
                                Select
                            </button>
                        </div>
                    </div>
                </div>

                <!-- EMG Card -->
                <div class="modality-card glass-card-strong rounded-3xl shadow-2xl overflow-hidden cursor-pointer border border-white/10" data-modality="emg">
                    <div class="h-40 bg-gradient-to-br from-indigo-600/20 to-purple-600/20 flex items-center justify-center border-b border-white/10">
                        <div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl">
                            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="p-8">
                        <h3 class="text-4xl font-semibold text-white mb-2">EMG</h3>
                        <p class="text-sm text-gray-400 font-castoro italic mb-3">Electromyography</p>
                        <span class="inline-block bg-purple-500/20 text-purple-300 text-xs font-semibold px-4 py-2 rounded-full mb-6 border border-purple-500/30">MUSCLE-POWERED CONTROL</span>
                        <ul class="space-y-3 text-gray-300 font-light mb-8">
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Measures muscle signals</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Accuracy: 85-90% for movement</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Strong, reliable signals</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Cost: $500-$5,000</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Best for: Prosthetic limbs</li>
                        </ul>
                        <div class="flex items-center justify-between">
                            <button class="info-btn text-purple-400 hover:text-purple-300 font-semibold transition-colors flex items-center" data-modality="emg">
                                <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Learn More
                            </button>
                            <button class="select-btn bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold px-8 py-3 rounded-xl transition-all transform hover:scale-105">
                                Select
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ECoG Card -->
                <div class="modality-card glass-card-strong rounded-3xl shadow-2xl overflow-hidden cursor-pointer border border-white/10" data-modality="ecog">
                    <div class="h-40 bg-gradient-to-br from-indigo-600/20 to-purple-600/20 flex items-center justify-center border-b border-white/10">
                        <div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl">
                            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="p-8">
                        <h3 class="text-4xl font-semibold text-white mb-2">ECoG</h3>
                        <p class="text-sm text-gray-400 font-castoro italic mb-3">Electrocorticography</p>
                        <div class="mb-6">
                            <span class="inline-block bg-purple-500/20 text-purple-300 text-xs font-semibold px-4 py-2 rounded-full border border-purple-500/30 mr-2">HIGH PERFORMANCE</span>
                            <span class="inline-block bg-red-500/20 text-red-300 text-xs font-semibold px-3 py-2 rounded-full border border-red-500/30">SURGERY REQUIRED</span>
                        </div>
                        <ul class="space-y-3 text-gray-300 font-light mb-8">
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Semi-invasive (brain surface)</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Accuracy: 90-95%</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Latency: 10-30ms</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Cost: $50,000+ (surgery)</li>
                            <li class="flex items-center"><span class="text-purple-400 mr-2">▸</span> Best for: Medical applications</li>
                        </ul>
                        <div class="flex items-center justify-between">
                            <button class="info-btn text-purple-400 hover:text-purple-300 font-semibold transition-colors flex items-center" data-modality="ecog">
                                <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Learn More
                            </button>
                            <button class="select-btn bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold px-8 py-3 rounded-xl transition-all transform hover:scale-105">
                                Select
                            </button>
                        </div>
                    </div>
                </div>

                <!-- fNIRS Card -->
                <div class="modality-card glass-card-strong rounded-3xl shadow-2xl overflow-hidden cursor-pointer border border-white/10" data-modality="fnirs">
                    <div class="h-40 bg-gradient-to-br from-indigo-600/20 to-purple-600/20 flex items-center justify-center border-b border-white/10">
                        <div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl">
                            <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="p-8">
                        <h3 class="text-4xl font-semibold text-white mb-2">fNIRS</h3>
                        <p class="text-sm text-gray-400 font-castoro italic mb-3">Functional Near-Infrared Spectroscopy</p>
                        <div class="mb-6">
                            <span class="inline-block bg-indigo-500/20 text-indigo-300 text-xs font-semibold px-4 py-2 rounded-full border border-indigo-500/30 mr-2">THE PORTABLE OPTION</span>
                            <span class="inline-block bg-cyan-500/20 text-cyan-300 text-xs font-semibold px-3 py-2 rounded-full border border-cyan-500/30">EMERGING TECH</span>
                        </div>
                        <ul class="space-y-3 text-gray-300 font-light mb-8">
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Non-invasive (blood oxygen)</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Portable and wearable</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Latency: 1000-2000ms (slower)</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Cost: $3,000-$30,000</li>
                            <li class="flex items-center"><span class="text-indigo-400 mr-2">▸</span> Best for: Mobile applications</li>
                        </ul>
                        <div class="flex items-center justify-between">
                            <button class="info-btn text-indigo-400 hover:text-indigo-300 font-semibold transition-colors flex items-center" data-modality="fnirs">
                                <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Learn More
                            </button>
                            <button class="select-btn bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold px-8 py-3 rounded-xl transition-all transform hover:scale-105">
                                Select
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </section>

    <!-- Parameters -->
    <section id="parameters-screen" class="screen hidden min-h-screen">
        <header class="glass-card sticky top-0 z-40 shadow-2xl border-b border-white/10">
            <div class="container mx-auto px-4 py-4 flex items-center justify-between">
                <button id="app-title-2" class="text-2xl font-bold text-white hover:text-gray-300 transition-colors">
                    BCI Simulator
                </button>
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold">1</div>
                    <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold">2</div>
                    <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold">3</div>
                    <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-gray-400 font-bold">4</div>
                </div>
                <div class="flex items-center space-x-3">
                    <a href="/account" class="text-white hover:text-gray-300 transition-colors flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        {{ username }}
                    </a>
                    <button id="help-btn-2" class="w-10 h-10 rounded-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold transition-colors">?</button>
                    <button id="reset-btn-2" class="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 text-white font-bold transition-colors">⟲</button>
                    <a href="/logout" class="text-white hover:text-gray-400 transition-colors">Log Out</a>
                </div>
            </div>
        </header>

        <main class="container mx-auto px-4 py-12 fade-in">
            <div class="grid lg:grid-cols-4 gap-8">
                <!-- Left Panel: Selected Method -->
                <aside class="lg:col-span-1">
                    <div class="glass-card-strong rounded-2xl shadow-xl p-6 sticky top-24 border border-white/10">
                        <h3 class="text-xl font-bold text-white mb-4">Selected Method</h3>
                        <div id="selected-method-display" class="mb-6 text-white">
                            <!-- JavaScript -->
                        </div>
                        <button id="change-method-btn" class="w-full bg-white/10 hover:bg-white/20 text-white font-semibold py-2 rounded-lg transition-colors">
                            ← Change Method
                        </button>
                    </div>
                </aside>

                <!-- Right Panel: Parameters and Results -->
                <div class="lg:col-span-3">
                    <h2 class="text-4xl font-bold gradient-text mb-4">Configure Your BCI Parameters</h2>
                    <p class="text-xl text-gray-400 mb-8">Adjust the settings below to see how they affect your BCI's performance</p>

                    <!-- Parameter Controls -->
                    <div class="glass-card-strong rounded-2xl shadow-xl p-8 mb-8 border border-white/10">
                        <h3 class="text-2xl font-bold text-white mb-6">Parameters</h3>

                        <!-- Electrode Slider -->
                        <div class="mb-8">
                            <div class="flex items-center justify-between mb-3">
                                <label class="text-lg font-semibold text-gray-300 flex items-center">
                                    Number of Electrodes
                                    <button class="info-tooltip ml-2 text-gray-400 hover:text-gray-300" data-tip="electrodes">ⓘ</button>
                                </label>
                                <span id="electrode-value" class="text-2xl font-bold text-white">32 electrodes</span>
                            </div>
                            <input type="range" id="electrode-slider" min="8" max="256" value="32" step="8"
                                   class="w-full slider">
                        </div>

                        <!-- Noise Slider -->
                        <div class="mb-8">
                            <div class="flex items-center justify-between mb-3">
                                <label class="text-lg font-semibold text-gray-300 flex items-center">
                                    Signal Noise Level
                                    <button class="info-tooltip ml-2 text-gray-400 hover:text-gray-300" data-tip="noise">ⓘ</button>
                                </label>
                                <span id="noise-value" class="text-2xl font-bold text-amber-400">Medium (5.0)</span>
                            </div>
                            <input type="range" id="noise-slider" min="0" max="10" value="5" step="0.5"
                                   class="w-full slider noise-slider">
                        </div>

                        <!-- Training Slider -->
                        <div class="mb-0">
                            <div class="flex items-center justify-between mb-3">
                                <label class="text-lg font-semibold text-gray-300 flex items-center">
                                    Training Time
                                    <button class="info-tooltip ml-2 text-gray-400 hover:text-gray-300" data-tip="training">ⓘ</button>
                                </label>
                                <span id="training-value" class="text-2xl font-bold text-purple-400">10 hours</span>
                            </div>
                            <input type="range" id="training-slider" min="1" max="100" value="10" step="1"
                                   class="w-full slider">
                        </div>
                    </div>

                    <!-- Performance Preview -->
                    <div class="glass-card-strong rounded-2xl shadow-xl p-8 border border-white/10">
                        <h3 class="text-2xl font-bold text-white mb-2">Performance Preview</h3>
                        <p class="text-gray-400 mb-6">These values update automatically as you adjust parameters</p>

                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <!-- Accuracy Metric -->
                            <div class="glass-card rounded-xl p-6 border border-white/10">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <span class="text-lg font-semibold text-gray-300">Accuracy</span>
                                    </div>
                                    <button class="info-tooltip text-gray-400 hover:text-gray-300" data-tip="accuracy">ⓘ</button>
                                </div>
                                <div class="text-5xl font-bold text-white mb-2" id="accuracy-display">71%</div>
                                <div class="w-full bg-white/10 rounded-full h-3">
                                    <div id="accuracy-bar" class="bg-gradient-to-r from-indigo-500 to-purple-500 h-3 rounded-full transition-all duration-500" style="width: 71%"></div>
                                </div>
                            </div>

                            <!-- Latency Metric -->
                            <div class="glass-card rounded-xl p-6 border border-white/10">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <span class="text-lg font-semibold text-gray-300">Response Time</span>
                                    </div>
                                    <button class="info-tooltip text-gray-400 hover:text-gray-300" data-tip="latency">ⓘ</button>
                                </div>
                                <div class="text-5xl font-bold text-green-400" id="latency-display">1512 ms</div>
                            </div>

                            <!-- Invasiveness Metric -->
                            <div class="glass-card rounded-xl p-6 border border-white/10">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <span class="text-lg font-semibold text-gray-300">Invasiveness</span>
                                    </div>
                                    <button class="info-tooltip text-gray-400 hover:text-gray-300" data-tip="invasiveness">ⓘ</button>
                                </div>
                                <div class="text-5xl font-bold text-white" id="invasiveness-display">1/5</div>
                                <div class="flex space-x-1 mt-2">
                                    <div class="invasiveness-dot w-6 h-6 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500"></div>
                                    <div class="invasiveness-dot w-6 h-6 rounded-full bg-white/20"></div>
                                    <div class="invasiveness-dot w-6 h-6 rounded-full bg-white/20"></div>
                                    <div class="invasiveness-dot w-6 h-6 rounded-full bg-white/20"></div>
                                    <div class="invasiveness-dot w-6 h-6 rounded-full bg-white/20"></div>
                                </div>
                            </div>

                            <!-- Cost Metric -->
                            <div class="glass-card rounded-xl p-6 border border-white/10">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center">
                                        <span class="text-lg font-semibold text-gray-300">Estimated Cost</span>
                                    </div>
                                    <button class="info-tooltip text-gray-400 hover:text-gray-300" data-tip="cost">ⓘ</button>
                                </div>
                                <div class="text-5xl font-bold text-purple-400" id="cost-display">$11,000</div>
                                <div class="text-2xl text-purple-400 mt-2" id="cost-dollars">$$$</div>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button id="view-results-btn" class="flex-1 bg-gradient-to-r from-indigo-600 to-cyan-500 hover:from-indigo-500 hover:to-cyan-400 text-white font-bold text-lg py-4 rounded-xl transition-all duration-300 transform hover:scale-[1.02]">
                                View Detailed Results →
                            </button>
                            <button id="star-config-btn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold px-6 py-4 rounded-xl transition-colors">
                                Star Configuration
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </section>

    <!-- Results -->
    <section id="results-screen" class="screen hidden min-h-screen">
        <header class="glass-card sticky top-0 z-40 shadow-lg border-b border-white/10">
            <div class="container mx-auto px-4 py-4 flex items-center justify-between">
                <button id="app-title-3" class="text-2xl font-bold text-white hover:text-gray-300 transition-colors">
                    BCI Simulator
                </button>
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold">1</div>
                    <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold">2</div>
                    <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold">3</div>
                    <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold">4</div>
                </div>
                <div class="flex items-center space-x-3">
                    <a href="/account" class="text-white hover:text-gray-300 transition-colors flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        {{ username }}
                    </a>
                    <a href="/logout" class="text-white hover:text-gray-400 transition-colors">Log Out</a>
                </div>
            </div>
        </header>

        <main class="container mx-auto px-4 py-12 max-w-5xl">
            <div id="results-content" class="space-y-8">
                <!-- JavaScript -->
            </div>

            <div class="mt-12 flex gap-4 justify-center flex-wrap">
                <button id="try-different-btn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold px-8 py-3 rounded-lg transition-colors">
                    Try Different Configuration
                </button>
                <button id="choose-different-btn" class="bg-purple-600 hover:bg-purple-500 text-white font-bold px-8 py-3 rounded-lg transition-colors">
                    Choose Different Method
                </button>
                <button id="star-results-btn" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold px-8 py-3 rounded-lg transition-colors">
                    Star These Results
                </button>
            </div>
        </main>
    </section>
</div>

<!-- Star Configuration Modal -->
<div id="star-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
    <div class="glass-card-strong rounded-2xl max-w-md w-full mx-4 border border-white/10">
        <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 rounded-t-2xl">
            <h3 class="text-2xl font-bold text-white flex items-center">
                Star Configuration
            </h3>
        </div>
        <div class="p-6">
            <label class="block text-sm font-semibold text-gray-300 mb-2">Configuration Name</label>
            <input type="text" id="star-name-input" placeholder="My super cool BCI that definitely works" 
                   class="w-full px-4 py-3 bg-white/5 border-2 border-white/10 text-white rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none text-lg placeholder-gray-500">
            <p class="text-sm text-gray-500 mt-2">Name your configuration!</p>
        </div>
        <div class="px-6 pb-6 flex gap-3">
            <button id="star-cancel-btn" class="flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 rounded-lg transition-colors">
                Cancel
            </button>
            <button id="star-confirm-btn" class="flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold py-3 rounded-lg transition-colors">
                Star It!
            </button>
        </div>
    </div>
</div>

<!-- Info Modal -->
<div id="info-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
    <div class="glass-card-strong rounded-2xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto border border-white/10">
        <div class="sticky top-0 glass-card-strong border-b border-white/10 p-6 flex items-center justify-between">
            <h3 id="modal-title" class="text-2xl font-bold text-white"></h3>
            <button id="close-modal" class="text-gray-400 hover:text-white text-3xl">×</button>
        </div>
        <div class="p-6">
            <p id="modal-content" class="text-gray-300 leading-relaxed"></p>
        </div>
    </div>
</div>

<!-- Help Modal -->
<div id="help-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
    <div class="glass-card-strong rounded-2xl max-w-3xl w-full mx-4 max-h-[80vh] overflow-y-auto border border-white/10">
        <div class="sticky top-0 glass-card-strong border-b border-white/10 p-6 flex items-center justify-between">
            <h3 class="text-2xl font-bold text-white">How to Use This Simulator</h3>
            <button id="close-help" class="text-gray-400 hover:text-white text-3xl">×</button>
        </div>
        <div class="p-6 space-y-4 text-gray-300">
            <p><strong>Step 1:</strong> Choose a brain signal recording method (EEG, EMG, ECoG, or fNIRS)</p>
            <p><strong>Step 2:</strong> Adjust the parameters to configure your BCI</p>
            <p><strong>Step 3:</strong> View real-time performance metrics as you adjust settings</p>
            <p><strong>Step 4:</strong> Review detailed results and learn about trade-offs</p>
            <p class="mt-4"><strong>Tip:</strong> Star your favorite configurations to compare them in your account!</p>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}
